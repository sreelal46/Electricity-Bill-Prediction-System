<link rel="stylesheet" href="/<i class=" fas fa-chess "></i>/user-alert.css">
<script src="https://unpkg.com/lucide@latest"></script>


<!-- Data holder for alerts -->
<div id="alertsData" data-alerts='{{json alerts}}' style="display: none;"></div>

<div class="container">
  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <h1>
        <i data-lucide="bell"></i>
        System Alerts
      </h1>
      <div class="header-subtitle">
        <span class="status-indicator" id="statusIndicator"></span>
        <span id="statusText">System Health Status</span>
      </div>
    </div>
  </header>

  <!-- STATS CARDS -->
  <!-- <div class="grid grid-cols-3 mb-4">
    <div class="card stats-card fade-in-up">
      <div class="stats-icon" style="background: rgba(239, 68, 68, 0.1); color: var(--accent-red);">
        <i data-lucide="alert-octagon"></i>
      </div>
      <div class="stats-content">
        <h3 id="criticalCount">0</h3>
        <p>Critical Alerts</p>
      </div>
    </div>

    <div class="card stats-card fade-in-up" style="animation-delay: 0.1s;">
      <div class="stats-icon" style="background: rgba(245, 158, 11, 0.1); color: var(--accent-yellow);">
        <i data-lucide="alert-triangle"></i>
      </div>
      <div class="stats-content">
        <h3 id="warningCount">0</h3>
        <p>Warnings</p>
      </div>
    </div>

    <div class="card stats-card fade-in-up" style="animation-delay: 0.2s;">
      <div class="stats-icon" style="background: rgba(59, 130, 246, 0.1); color: var(--accent-blue);">
        <i data-lucide="info"></i>
      </div>
      <div class="stats-content">
        <h3 id="lowCount">0</h3>
        <p>Info Alerts</p>
      </div>
    </div>
  </div> -->

  <!-- RECENT ALERTS SECTION -->
  <h2 class="section-heading">
    <i data-lucide="bell-ring"></i>
    Recent Alerts
  </h2>

  {{#if alerts}}
  {{#if (gt alerts.length 0)}}
  <div class="alerts-list">
    {{#each alerts}}
    <div
      class="alert-item {{#if (eq this.severity 'HIGH')}}severity-high{{else if (eq this.severity 'MEDIUM')}}severity-medium{{else}}severity-low{{/if}}">
      <div class="alert-content-wrapper">
        <div
          class="alert-icon {{#if (eq this.severity 'HIGH')}}severity-high{{else if (eq this.severity 'MEDIUM')}}severity-medium{{else}}severity-low{{/if}}">
          {{#if (eq this.severity "HIGH")}}
          <i data-lucide="alert-octagon"></i>
          {{else if (eq this.severity "MEDIUM")}}
          <i data-lucide="alert-triangle"></i>
          {{else}}
          <i data-lucide="info"></i>
          {{/if}}
        </div>
        <div class="alert-details">
          <div
            class="alert-message {{#if (eq this.severity 'HIGH')}}severity-high{{else if (eq this.severity 'MEDIUM')}}severity-medium{{else}}severity-low{{/if}}">
            {{this.message}}
          </div>
          <div class="alert-timestamp">
            <i data-lucide="clock"></i>
            {{this.timestamp}}
          </div>
        </div>
      </div>
      <!-- {{#if (eq this.status "unread")}}
      <div class="unread-badge">
        <i data-lucide="circle"></i>
        Unread
      </div>
      {{/if}} -->
    </div>
    {{/each}}
  </div>
  {{else}}
  <!-- Empty alerts state -->
  <div class="card fade-in-up">
    <div class="success-message">
      <div class="success-message-icon">
        <i data-lucide="shield-check"></i>
      </div>
      <div class="success-message-content">
        <h3>All Systems Operational</h3>
        <p>No alerts at this time. Your energy monitoring system is running smoothly!</p>
      </div>
    </div>

    <div class="empty-state">
      <div class="empty-state-icon">
        <i data-lucide="check-circle"></i>
      </div>
      <h2>Everything Looks Great!</h2>
      <p>Your smart meter is operating normally with no issues detected. You'll be notified here if any alerts
        occur.</p>

      <div class="empty-state-features">
        <div class="empty-state-feature">
          <div class="empty-state-feature-icon">
            <i data-lucide="zap"></i>
          </div>
          <div class="empty-state-feature-content">
            <h4>Power Monitoring</h4>
            <p>Active monitoring for voltage and current anomalies</p>
          </div>
        </div>

        <div class="empty-state-feature">
          <div class="empty-state-feature-icon">
            <i data-lucide="trending-up"></i>
          </div>
          <div class="empty-state-feature-content">
            <h4>Usage Tracking</h4>
            <p>Real-time tracking of energy consumption patterns</p>
          </div>
        </div>

        <div class="empty-state-feature">
          <div class="empty-state-feature-icon">
            <i data-lucide="bell"></i>
          </div>
          <div class="empty-state-feature-content">
            <h4>Smart Alerts</h4>
            <p>Intelligent notifications for unusual activity</p>
          </div>
        </div>

        <div class="empty-state-feature">
          <div class="empty-state-feature-icon">
            <i data-lucide="shield"></i>
          </div>
          <div class="empty-state-feature-content">
            <h4>System Protection</h4>
            <p>Automated detection of system health issues</p>
          </div>
        </div>
      </div>

      <div class="empty-state-actions">
        <button class="empty-state-btn" onclick="location.reload()">
          <i data-lucide="refresh-cw"></i>
          Refresh Alerts
        </button>
        <button class="empty-state-btn secondary" onclick="window.location.href='/user/dashboard'">
          <i data-lucide="layout-dashboard"></i>
          View Dashboard
        </button>
      </div>
    </div>
  </div>
  {{/if}}
  {{else}}
  <!-- No alerts data at all -->
  <div class="card fade-in-up">
    <div class="empty-state">
      <div class="empty-state-icon">
        <i data-lucide="bell-off"></i>
      </div>
      <h2>No Alert Data Available</h2>
      <p>Unable to retrieve alert information. This could be due to system initialization or connectivity issues.</p>

      <div class="empty-state-actions">
        <button class="empty-state-btn" onclick="location.reload()">
          <i data-lucide="refresh-cw"></i>
          Refresh Page
        </button>
        <button class="empty-state-btn secondary" onclick="window.location.href='/user/dashboard'">
          <i data-lucide="layout-dashboard"></i>
          Go to Dashboard
        </button>
        <!-- <button class="empty-state-btn secondary" onclick="window.location.href='/user/help'">
          <i data-lucide="help-circle"></i>
          Get Help
        </button> -->
      </div>
    </div>
  </div>
  {{/if}}
</div>


<script src="/js/user-alert.js"></script>